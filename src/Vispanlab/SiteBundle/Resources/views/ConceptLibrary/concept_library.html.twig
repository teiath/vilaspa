{% extends 'VispanlabSiteBundle::base.html.twig' %}

{% block content %}
<div class="row text-center concept-library">
    <div class="col-md-12">
        <h2>{{'concept_library.heading'|trans({'%aoe%': area_of_expertise.name})}}</h2>
        <div class="concept-search-form-wrapper">
            <form action="#" method="GET" class="sidebar-form" role="search" onsubmit="return false;">
                <div class="input-group concept-search-form">
                    <input type="text" name="q" value="{{ app.request.get('q') }}" class="form-control" placeholder="{{ 'search_placeholder'|trans({}, 'SonataAdminBundle') }}">
                        <span class="input-group-btn">
                            <button class="btn btn-flat" type="submit">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                </div>
            </form>
        </div>
        <ul class="list-inline">
        {% for concept in area_of_expertise.concepts %}
            <li class="concept-search-result" style="vertical-align: bottom;" data-name="{{concept.nameForLang('el')|striptags|raw}}">
                <a href="{{path('concept', {'concept': concept.id})}}" class="well well-lg" style="display: inline-block; height: 70px; min-width: 300px;">
                    {{concept.nameForLang('el')|striptags|raw}}
                </a>
            </li>
        {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}

{% block javascripts %}
{{parent()}}
<script src="{{asset('bundles/sonataadmin/vendor/bootstrap/js/transition.js')}}"></script>
<script src="{{asset('bundles/sonataadmin/vendor/bootstrap/js/collapse.js')}}"></script>
<script src="{{asset('js/vendor/uppercaser.js')}}" type="text/javascript"></script>
<script src="{{asset('js/vendor/donetyping.js')}}" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        var updateSearchResults = function() {
            var $input = UpperCaser.toUpper($.trim($('.concept-search-form input[type="text"]').val()));
            $('.concept-search-result').each(function() {
                if($input.length <= 0 || UpperCaser.toUpper($(this).attr('data-name')).indexOf($input) !== -1) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        };
        $('.concept-search-form input[type="text"]').donetyping(updateSearchResults);
        $('.sidebar-form').submit(updateSearchResults)
        updateSearchResults();
    });
</script>
{% endblock %}